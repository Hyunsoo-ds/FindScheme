<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="result"></div>

    <script type="text/javascript">

        const urlParams = new URLSearchParams(window.location.search);
        const interfaceValue = urlParams.get('i');
        const resultDiv = document.getElementById('result');
        var Xwords = ['Xwords','window_list','APPinterface','i','word','sendDataToServer','requestAnimationFrame','onwebkitanimationiteration', 'onunload', 'btoa', 'webkitStorageInfo', 'onbeforexrselect', 'onplay', 'indexedDB', 'originAgentCluster', 'scrollTo', 'onbeforetoggle', 'oncontextlost', 'pageYOffset', 'onsubmit', 'onscrollend', 'orientation', 'onpageshow', 'matchMedia', 'trustedTypes', 'innerWidth', 'external', 'ontransitionend', 'self', 'confirm', 'sessionStorage', 'ondragover', 'onauxclick', 'onclose', 'onpointerover', 'ontransitionstart', 'onwebkittransitionend', 'name', 'releaseEvents', 'resizeTo', 'onstorage', 'oncontextrestored', 'open', 'ondurationchange', 'oncanplay', 'resizeBy', 'ongotpointercapture', 'ontouchcancel', 'setTimeout', 'onsuspend', 'scrollbars', 'onappinstalled', 'onorientationchange', 'window', 'onblur', 'cancelIdleCallback', 'onloadedmetadata', 'PERSISTENT', 'onwebkitanimationstart', 'onselect', 'defaultStatus', 'onbeforeunload', 'oncontentvisibilityautostatechange', 'screenY', 'length', 'onrejectionhandled', 'onpointerout', 'onseeking', 'clearInterval', 'atob', 'onemptied', 'webkitRequestAnimationFrame', 'onhashchange', 'onmouseover', 'setInterval', 'removeEventListener', 'onerror', 'fence', 'oncuechange', 'requestIdleCallback', 'scroll', 'onmessage', 'onended', 'defaultstatus', 'onanimationiteration', 'onoffline', 'onpopstate', 'ondragleave', 'onbeforeprint', 'onkeyup', 'onmouseleave', 'onmousewheel', 'onpointerup', 'ondragstart', 'onfocus', 'openDatabase', 'onpointerrawupdate', 'ontoggle', 'onsearch', 'onplaying', 'parent', 'localStorage', 'credentialless', 'android', 'blur', 'locationbar', 'onbeforeinput', 'visualViewport', 'ononline', 'ontouchend', 'ontransitionrun', 'reportError', 'onbeforematch', 'prompt', 'onafterprint', 'onlanguagechange', 'screenX', 'screen', 'onscroll', 'innerHeight', 'onloadstart', 'createImageBitmap', 'isSecureContext', 'personalbar', 'webkitRequestFileSystem', 'onmessageerror', 'toolbar', 'ontransitioncancel', 'document', 'origin', 'onslotchange', 'onselectionchange', 'scheduler', 'onkeydown', 'onvolumechange', 'onunhandledrejection', 'ontouchmove', 'frameElement', 'onclick', 'captureEvents', 'ondragenter', 'onresize', 'opener', 'outerWidth', 'onwaiting', 'webkitCancelAnimationFrame', 'onload', 'clientInformation', 'ondrop', 'onformdata', 'onmouseout', 'alert', 'getComputedStyle', 'onmousedown', 'pageXOffset', 'chrome', 'onwheel', 'close', 'onpointerleave', 'onabort', 'onanimationstart', 'structuredClone', 'onlostpointercapture', 'moveBy', 'ontouchstart', 'screenTop', 'oninput', 'oninvalid', 'onseeked', 'onwebkitanimationend', 'onmousemove', 'onratechange', 'webkitResolveLocalFileSystemURL', 'status', 'onloadeddata', 'oncancel', 'crossOriginIsolated', 'onpointercancel', 'outerHeight', 'onbeforeinstallprompt', 'find', 'onchange', 'onpointerdown', 'getSelection', 'statusbar', 'onpause', 'frames', 'oncontextmenu', 'onmouseenter', 'onreset', 'queueMicrotask', 'onkeypress', 'top', 'navigation', 'postMessage', 'addEventListener', 'speechSynthesis', 'moveTo', 'onstalled', 'TEMPORARY', 'onsecuritypolicyviolation', 'onmouseup', 'history', 'customElements', 'fetch', 'onprogress', 'clearTimeout', 'crypto', 'closed', 'ontimeupdate', 'menubar', 'scrollY', 'screenLeft', 'oncanplaythrough', 'location', 'stop', 'print', 'devicePixelRatio', 'ondragend', 'onpointermove', 'ondrag', 'navigator', 'onselectstart', 'scrollBy', 'onanimationend', 'onpagehide', 'focus', 'styleMedia', 'onpointerenter', 'performance', 'cancelAnimationFrame', 'scrollX', 'ondblclick', 'dispatchEvent'];
        var window_list = [];
        var APPinterface = [];

        const interfaceObj = window[interfaceValue];


        // Function to send data to the server
        function sendDataToServer(data) {
            fetch('/test-res2', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ data: data })
            })
            .then(response => response.json())
            .then(data => {
                // Handle the server response here
                console.log(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Loop through window properties and add them to resultDiv
        for (const key in window) {
            window_list.push(key)
        }
        
        resultDiv.innerHTML  += 'window list<br>=================================================<br>'


        for (var i = 0; i < window_list.length; i++) {
            var word = window_list[i];
            resultDiv.innerHTML += word+' ';
            if (Xwords.indexOf(word) === -1) {
                APPinterface.push(word);
            }
        }

        resultDiv.innerHTML += '<br><br>APPinterface list<br>=================================================<br>';

        for (var i = 0; i < APPinterface.length; i++) {
            var word = APPinterface[i];
            resultDiv.innerHTML += word+' ';
        }

        for (var i = 0; i < APPinterface.length; i++) {
            resultDiv.innerHTML += '<br><br>Method '+APPinterface[i]+'<br>=================================================<br>';
            const word = APPinterface[i];
            const interfaceObj = window[word];

            for (const key in interfaceObj) {
                resultDiv.innerHTML += key+' ';
            }
        }



        // Send the data to the server
        sendDataToServer(resultDiv.innerHTML);
    </script>
</body>
</html>
